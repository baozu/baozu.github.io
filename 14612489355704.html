
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>
    
   - potatoooooo
  

  </title>
  <meta name="author" content="">
  <meta name="description" content="">

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href="asset/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="atom.xml" rel="alternate" title="potatoooooo" type="application/atom+xml">
  <script src="asset/js/modernizr-2.0.js"></script>
  <script src="asset/js/jquery.min.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/solarized_light.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>

  <style type="text/css">
  .cat-children-p{ padding: 6px 0px;}
  .hljs{background: none;}
  </style>
  <script type="text/javascript">
  var isAddSildbar = true;
  </script>
  <script src="asset/js/octopress.js" type="text/javascript"></script>
</head>
<script type="text/javascript">
//链接新开窗口
function addBlankTargetForLinks () {
  $('a[href^="http"]').each(function(){
      $(this).attr('target', '_blank');
  });
}
$(document).ready(function(event) {
  addBlankTargetForLinks();
});
</script>
<body   >
  <header role="banner"><hgroup>
  <h1><a href="index.html">potatoooooo</a></h1>
  
    <h2></h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:baozu.us" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="index.html">Home</a></li>
  <li><a href="archives.html">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content"> 
<div>
	<article class="hentry" role="article">
	<header>
			  	<h1 class="entry-title"></h1>
				<p class="meta"><time datetime="2016-04-20T22:28:55+08:00" pubdate data-updated="true">2016/4/20</time></p>
			 </header>
		  	<div class="entry-content">
			  	<h1 id="toc_0">验证码的前世今生（今生篇）</h1>

<p>看完《验证码的前世今生（前世篇）》也许第一感觉就是Winter is coming，互联网的人机对抗到了最黑暗的时刻。柳暗花明又一村，最黑暗的时刻也是光明即将来临的时刻——在传统验证码的末日新的反向图灵测试机制浴火重生。</p>

<h3 id="toc_1">0x1 验证码的划代标准</h3>

<p>在介绍新的反向图灵测试机制前，首先我们对验证码进行划代对比。通过验证码的划代对比我们能更清楚新型验证码的特性。</p>

<p>验证码划代的标准是人机识别过程中基于对<strong>人类知识的应用</strong>。</p>

<h4 id="toc_2">第一代：标准验证码</h4>

<p>这一代验证码是即是我们常见的图形验证码、语音验证码，基于机器难以处理复杂的计算机视觉及语音识别问题，而人类却可以轻松的识别来区分人类及机器。这一代验证码<strong>初步利用了人类知识容易解答，而计算机难以解答的机制进行人机判断</strong>。</p>

<p><img src="http://image.3001.net/images/20160301/1456845071523.png" alt="验证码"/></p>

<h4 id="toc_3">第二代：创新验证码</h4>

<p>第二代验证码是基于第一代验证码的核心思想（通过人类知识可以解答，而计算机难以解答的问题进行人机判断）而产生的创新的交互优化型验证码。第二代验证码基于第一代验证码的核心原理－－<strong>“人机之间知识的差异”，拓展出大量创新型验证码</strong>。</p>

<p>如12306的验证码也是对于传统验证码的一种创新：</p>

<p><img src="http://image.3001.net/images/20160301/14568451341958.png" alt="12306"/></p>

<h4 id="toc_4">第三代：无知识型验证码</h4>

<p>第三代验证码最大的特点是<strong>不再基于知识进行人机判断</strong>，而是基于<strong>人类固有的生物特征以及操作的环境信息综合决策</strong>，来判断是人类还是机器。无知识型验证码最大特点即<strong>无需人类思考</strong>，从而不会打断用户操作，进而提供更好的用户体验。</p>

<p>如Google的新版ReCaptcha：</p>

<p><img src="http://image.3001.net/images/20160301/14568453665723.png" alt="ReCaptcha"/></p>

<p>阿里巴巴的滑动验证：:</p>

<p><img src="http://image.3001.net/images/20160302/1456883233756.png" alt="NOCaptcha"/></p>

<h3 id="toc_5">0x2 无知识型验证码的原理</h3>

<p><strong>Step 1</strong>：在Web前端周期性的对Javascript代码进行混淆和并更新加密算法，<strong>将不可信的Web前端打造成可信的客户端</strong>。在用户进行滑动操作时，基于可信的客户端采集用户操作的行为信息以及环境信息，将其加密后提交给后端的风控引擎；</p>

<p>Web前端因为代码都是明文形式的脚本语言，服务端想要从客户端获取可信的数据一直面临“源码面前，了无秘密”的困扰。给一个前端工程师充足的时间，似乎Web前端真的是了无秘密，如下图：</p>

<p><img src="http://image.3001.net/images/20160302/14569332255306.png" alt="renren"/></p>

<p>而随着攻防对抗的持续，安全的补锅匠们总能找到猥琐的方法来进行防御。Web前端虽然没有客户端防止逆向和调试的安全强度，但是却具备客户端所不具有的hotpatch能力。</p>

<p>参考Map-Reduce的原理，单台机器性能不行，把任务分派到多台机器并发执行。如果单份Javascript混淆的强度不可行，那么周期性的对Javascript代码自动混淆。即便攻击者能够短时间的对Web前端进行逆向，但逆向出来的功能短期之后就会在服务端失效，那么也能极大的消耗攻击者的成本。</p>

<p>更可怕的是丧心病狂的Google基于Javascript完全的实现一套虚拟机，核心代码使用字节码实现。周期性的对字节码格式更新逆向的成本成几何级数递增。</p>

<p>如果代码逻辑不更新，仅仅重复的混淆原有逻辑，那么仍然没有意义。而对于一个Web的验证码应用，核心功能只有两部分：</p>

<ol>
<li>事件采集模块，采集用户的行为信息，此部分逻辑简单，也无法自动化更新代码逻辑；</li>
<li>行为数据加密模块，该部分的核心是加密算法，似乎代码逻辑自动化更新变化有足够空间。</li>
</ol>

<p>为了保障前端的可信，需要对加密算法进行自动化更新，需要一个巨大的对称加密算法可选集合。而所有对称加密算法都基于Feistel分组密码结构，基于Feistel分组密码结构可以派生出无数的对称加密算法。</p>

<p>如下图，Festel分组结构的可逆性不要求加密的核心函数F可逆，故可以自动的生成任意的F函数进而派生出无数对称加密算法。</p>

<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Feistel_cipher_diagram_en.svg/1022px-Feistel_cipher_diagram_en.svg.png" alt="Feistel"/></p>

<p>基于自动化的代码更新及混淆机制从而保障整个Web代码对抗逆向分析和调试的强度，进而将不可信的Web前端打造成可信的客户端。</p>

<p><strong>Step 2</strong>：风控引擎会基于用户操作的行为特征、用户环境信息、用户对应的设备指纹及其设备信誉综合进行决策，判断是否需要对该次操作进行二次判断或者是直接阻断。</p>

<p><img src="http://image.3001.net/images/20160303/14569353485868.png" alt="risk"/></p>

<h3 id="toc_6">0x3 无知识型验证码的优点</h3>

<p>无知识型验证码有三大核心优点，分别是用户体验，风险识别，风险拦截。</p>

<h4 id="toc_7">用户体验：</h4>

<p>无知识型验证码针对大多数的用户能够无需思考，直接通过。不存在业务和流程的打断，体验流畅，对用户体验极大优化。</p>

<h4 id="toc_8">风险识别：</h4>

<p>因为随着机器学习的发展让机器掌握人类具有的知识也不再是难点，无知识型验证码不再基于知识来挑战机器，而是基于人类的固有行为特征以及操作的环境信息综合进行风控决策，攻击者难以批量的模拟出可以欺骗风控引擎的正常人类的的操作。</p>

<h4 id="toc_9">风险拦截：</h4>

<p>普通的验证码基于知识对机器发起挑战，无法做到对机器进行阻断。因为知识的挑战还需要兼顾人类的体验，机器通过的概率只能做到无限的降低而无法消除。而无知识型验证码基于后端的风控决策，可以对不同风险的操作提出更高难度的验证码乃至阻断，有更大空间对风险进行消除和拦截。</p>

<h3 id="toc_10">0x4 总结</h3>

<p>目前阿里巴巴提供的滑动验证产品，目前对外提供免费试用，欢迎申请试用<a href="https://www.aliyun.com/product/antifraud">滑动验证</a>，Discuz插件<a href="http://addon.discuz.com/?@oculus.plugin">安装链接</a>。</p>

<p>最后，希望滑动验证产品能够建设更简单和安全的互联网: )</p>

			</div>

		
	  
		<footer>
		 <p class="meta">

			
			<span class="categories">
			 
			</span>
		    </p>
		    <p class="meta">
		      
		 </p>
	    
		<div class="sharing">
			
		</div>

	    <p class="meta">
	    
	    
	    </p>
	  </footer>
	</article>
</div>
 <aside class="sidebar"> 

	<section>
	  <h1>Categories</h1>
	  <ul id="recent_posts">
	  
	        
	      </li>
	   
	  </ul>
	</section>
	<section>
	  <h1>Recent Posts</h1>
	  <ul id="recent_posts">
	  
	      
		      <li class="post">
		        <a href="14612489355704.html"></a>
		      </li>
	     
	   
	  </ul>
	</section>
	
</aside> </div></div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 -  -
  <span class="credit">Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a> &nbsp;&nbsp; Theme by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
<script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"><div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"><div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>

</body>
</html>